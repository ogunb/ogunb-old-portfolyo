'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}// debounce function to prevent crashing events.
function debounce(func){var wait=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;var immediate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var timeout;return function(){var context=this,args=arguments;var later=function later(){timeout=null;if(!immediate)func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}}// We will change some styling on the page, depending on the section.
function handleScroll(){// Declare an empty obj for future use of styles.
var bodyStyles={};// Get sections and their offset from top and put those into an object,
// so I can add more items in the future and it won't break.
var sectionNode=document.querySelectorAll('section');var sections={};sectionNode.forEach(function(sec){sections[sec.classList[0]]=sec.offsetTop-sec.offsetHeight/2});// Depending on the section you are on, the below code are going to set,
// bodyStyles object and we'll run a function to set styles real-time.
bodyStyles={body:'var(--light)',logoInner:'var(--cta)',logoOuter:'var(--dark)',link:'var(--dark)'};handleScrollStyles(bodyStyles);if(window.scrollY>=250){var cardItem=document.querySelectorAll('.cardimg__item');cardItem.forEach(function(item){item.classList.add('cardimg--reveal')})}if(window.scrollY>=sections.sleepy){bodyStyles={body:'#7F7CBE',logoInner:'var(--light)',logoOuter:'var(--dark)',link:'var(--dark)'};handleScrollStyles(bodyStyles)}if(window.scrollY>=sections.bookopus){bodyStyles={body:'var(--bookopus)',logoInner:'var(--light)',logoOuter:'var(--dark)',link:'var(--dark)'};handleScrollStyles(bodyStyles)}if(window.scrollY>=sections.rennie){bodyStyles={body:'var(--rennie)',logoInner:'var(--light)',logoOuter:'var(--dark)',link:'var(--light)'};handleScrollStyles(bodyStyles)}if(window.scrollY>=sections.contact){bodyStyles={body:'var(--cta)',logoInner:'var(--darker)',logoOuter:'var(--light)',link:'var(--light)'};handleScrollStyles(bodyStyles)}}var body=document.querySelector('body');var logoInner=body.querySelector('.logo svg .c');function handleScrollStyles(styles){// const body
// const logoInner
var logoOuter=body.querySelector('.logo svg .d');var links=body.querySelectorAll('.nav ul li a');body.style.backgroundColor=styles.body;if(document.documentElement.offsetWidth>900){logoInner.style.fill=styles.logoInner;logoOuter.style.stroke=styles.logoOuter;links.forEach(function(link){link.style.color=styles.link})}}window.addEventListener('scroll',debounce(whichScroll));function whichScroll(){!document.querySelector('.case__html .main-wrapper')?handleScroll():handleBookopusScroll()}// Get both desktop and mobile nav about triggers and bind them a click event.
var aboutSec=document.querySelectorAll('.about--desktop, .about--mobile');aboutSec.forEach(function(sec){return sec.addEventListener('click',openAbout)});var trigger=void 0;function openAbout(){trigger=this;var about=document.querySelector('.about');// Declare close element and bind the closing function to it.
var close=document.querySelector('.about__close');close.addEventListener('click',closeAbout);// when the click fires, add about section an active class, which then will animate itself in.
about.classList.add('about--active');// and add some style to other elements on the page.
if(about.classList.contains('about--active')){this.classList.add('highlight');// add highlighter to the link.
logoInner.style.fill='var(--light)';body.style.overflow='hidden'}else{closeAbout()}// Remove all styling and close about section.
function closeAbout(){about.classList.remove('about--active');logoInner.style.fill='var(--cta)';trigger.classList.remove('highlight');body.style.overflow='visible'}}// declare mobile menu element and bind a click event to it.
var menu=document.querySelector('.mobile-nav--menu');menu.addEventListener('click',handleMenu);function handleMenu(){var logo=document.querySelector('.mobile-nav .logo .c');// the logo inside of the mobile navigation.
var mainLinks=document.querySelector('.mobile-nav__links');var links=Array.from(document.querySelectorAll('.mobile-nav__links > li'));menu.classList.toggle('active');// if the nav is activated...
if(menu.classList.contains('active')){var addStyles=function addStyles(e){// ...if the ended transition is transform, change styles...
if(e.propertyName==='transform'){mainLinks.style.transform='scale(1)';// ...and reveal links one by one, in order.
links.forEach(function(link,i){setTimeout(function(){link.style.opacity='1'},100*(i+1))});// also remove the listener for menu.
menu.removeEventListener('transitionend',addStyles,false)}};// ...change styles...
logo.style.fill='var(--light)';body.style.overflowY='hidden';// ...check the transition end...
menu.addEventListener('transitionend',addStyles)}else{closeMenu()}function closeMenu(){var reverseLinks=links.reverse();reverseLinks.forEach(function(link,i){links.forEach(function(link,i){setTimeout(function(){link.style.opacity='0'},100*(i+1))});link.addEventListener('click',function(){if(menu.classList.contains('active')){menu.classList.remove('active');closeMenu()}});link.addEventListener('transitionend',removeStyles)});function removeStyles(e){if(e.propertyName==='opacity'){logo.style.fill='var(--cta)';body.style.overflowY='visible';mainLinks.style.transform='scale(1, 0)';reverseLinks.forEach(function(link){return link.removeEventListener('transitionend',removeStyles)})}}}}// declare sections here to fetch.
// ! this requires a data-fetch on the html element, otherwise a "coming soon" statement will be shown.
// ! more on this below comments.
var bookopus=document.querySelector('.bookopus');var rennie=document.querySelector('.rennie');bookopus.addEventListener('click',function(){getPage(this.dataset.fetch,this)});rennie.addEventListener('click',function(){getPage(this.dataset.fetch,this)});// check if the page has an existing content...
function getPage(page,el){if(page===undefined){handleComing();return}fetch(page).then(function(res){return res.text()}).then(function(data){return displayFetch(el,data)});// give clicked element and the data from the server to display.
}// if it does give the data to the function below for display.
function displayFetch(el,data){var cardImg=el.querySelector('.cardimg--bookopus');var worksArticle=el.querySelector('.works__article');var index=document.querySelector('#index');var caseLand=document.querySelector('#case-content');var caseHtml=caseLand.querySelector('.case__html');caseHtml.innerHTML=data;el.classList.add('case--active');caseLand.classList.add('case--active');menu.style.display='none';index.style.visibility='hidden';logoInner.style.fill='var(--cta)';document.querySelector('.mobile-nav').style.width='50%';window.scrollTo(0,0);var closeBtn=document.querySelector('.case__close');closeBtn.addEventListener('click',caseClose);function caseClose(){document.querySelector('.mobile-nav').style.width='100%';caseHtml.innerHTML='';el.classList.remove('case--active');caseLand.classList.remove('case--active');menu.style.display='block';index.style.visibility='visible';handleScroll();window.scrollTo(0,bookopus.offsetTop)}}// otherwise...
function handleComing(){// a "coming soon" caption will animate in and when the animation is done,
// it will remove both animation class and the event listener from the coming soon element.
var coming=rennie.querySelector('.coming-soon');coming.classList.add('animate');coming.addEventListener('animationend',clearAnimation);function clearAnimation(){coming.classList.remove('animate');coming.removeEventListener('animationend',clearAnimation)}}function handleBookopusScroll(){var mockup=document.querySelector('.case__mockup');var mockupImg=document.querySelector('.case__mockup img');var bottomMock=document.querySelector('.case__bottom');var bottomMockImg=Array.from(document.querySelectorAll('.case__bottom img'));var mockupOffset=mockup.getBoundingClientRect().top;var bottomOffset=bottomMock.getBoundingClientRect().top;if(mockupOffset<450){mockupImg.classList.add('animate')}if(bottomOffset<400){for(var img in bottomMockImg){bottomMockImg[img].classList.add('animate')}}}window.addEventListener('scroll',function(){});var VanillaTilt=function(){'use strict';var t=function(){function t(_t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,t);if(!(_t instanceof Node))throw'Can\'t initialize VanillaTilt because '+_t+' is not a Node.';this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=_t,this.settings=this.extendSettings(e),this.reverse=this.settings.reverse?-1:1,this.glare=this.isSettingTrue(this.settings.glare),this.glarePrerender=this.isSettingTrue(this.settings['glare-prerender']),this.glare&&this.prepareGlare(),this.addEventListeners()}_createClass(t,[{key:'isSettingTrue',value:function isSettingTrue(t){return''===t||!0===t||1===t}},{key:'addEventListeners',value:function addEventListeners(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResizeBind.bind(this),this.element.addEventListener('mouseenter',this.onMouseEnterBind),this.element.addEventListener('mousemove',this.onMouseMoveBind),this.element.addEventListener('mouseleave',this.onMouseLeaveBind),this.glare&&window.addEventListener('resize',this.onWindowResizeBind)}},{key:'removeEventListeners',value:function removeEventListeners(){this.element.removeEventListener('mouseenter',this.onMouseEnterBind),this.element.removeEventListener('mousemove',this.onMouseMoveBind),this.element.removeEventListener('mouseleave',this.onMouseLeaveBind),this.glare&&window.removeEventListener('resize',this.onWindowResizeBind)}},{key:'destroy',value:function destroy(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}},{key:'onMouseEnter',value:function onMouseEnter(t){this.updateElementPosition(),this.element.style.willChange='transform',this.setTransition()}},{key:'onMouseMove',value:function onMouseMove(t){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=t,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:'onMouseLeave',value:function onMouseLeave(t){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}},{key:'reset',value:function reset(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.element.style.transform='perspective('+this.settings.perspective+'px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)',this.glare&&(this.glareElement.style.transform='rotate(180deg) translate(-50%, -50%)',this.glareElement.style.opacity='0')}},{key:'getValues',value:function getValues(){var t=(this.event.clientX-this.left)/this.width,e=(this.event.clientY-this.top)/this.height;return t=Math.min(Math.max(t,0),1),e=Math.min(Math.max(e,0),1),{tiltX:(this.reverse*(this.settings.max/2-t*this.settings.max)).toFixed(2),tiltY:(this.reverse*(e*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*t,percentageY:100*e,angle:Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI)}}},{key:'updateElementPosition',value:function updateElementPosition(){var t=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=t.left,this.top=t.top}},{key:'update',value:function update(){var t=this.getValues();this.element.style.transform='perspective('+this.settings.perspective+'px) rotateX('+('x'===this.settings.axis?0:t.tiltY)+'deg) rotateY('+('y'===this.settings.axis?0:t.tiltX)+'deg) scale3d('+this.settings.scale+', '+this.settings.scale+', '+this.settings.scale+')',this.glare&&(this.glareElement.style.transform='rotate('+t.angle+'deg) translate(-50%, -50%)',this.glareElement.style.opacity=''+t.percentageY*this.settings['max-glare']/100),this.element.dispatchEvent(new CustomEvent('tiltChange',{detail:t})),this.updateCall=null}},{key:'prepareGlare',value:function prepareGlare(){if(!this.glarePrerender){var _t2=document.createElement('div');_t2.classList.add('js-tilt-glare');var e=document.createElement('div');e.classList.add('js-tilt-glare-inner'),_t2.appendChild(e),this.element.appendChild(_t2)}this.glareElementWrapper=this.element.querySelector('.js-tilt-glare'),this.glareElement=this.element.querySelector('.js-tilt-glare-inner'),this.glarePrerender||(Object.assign(this.glareElementWrapper.style,{position:'absolute',top:'0',left:'0',width:'100%',height:'100%',overflow:'hidden'}),Object.assign(this.glareElement.style,{position:'absolute',top:'50%',left:'50%','pointer-events':'none','background-image':'linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)',width:2*this.element.offsetWidth+'px',height:2*this.element.offsetWidth+'px',transform:'rotate(180deg) translate(-50%, -50%)','transform-origin':'0% 0%',opacity:'0'}))}},{key:'updateGlareSize',value:function updateGlareSize(){Object.assign(this.glareElement.style,{width:''+2*this.element.offsetWidth,height:''+2*this.element.offsetWidth})}},{key:'onWindowResizeBind',value:function onWindowResizeBind(){this.updateGlareSize()}},{key:'setTransition',value:function setTransition(){var _this=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+'ms '+this.settings.easing,this.glare&&(this.glareElement.style.transition='opacity '+this.settings.speed+'ms '+this.settings.easing),this.transitionTimeout=setTimeout(function(){_this.element.style.transition='';_this.glare&&(_this.glareElement.style.transition='')},this.settings.speed)}},{key:'extendSettings',value:function extendSettings(t){var e={reverse:!1,max:35,perspective:1e3,easing:'cubic-bezier(.03,.98,.52,.99)',scale:'1',speed:'300',transition:!0,axis:null,glare:!1,'max-glare':1,'glare-prerender':!1,reset:!0},i={};for(var s in e){if(s in t)i[s]=t[s];else if(this.element.hasAttribute('data-tilt-'+s)){var _t3=this.element.getAttribute('data-tilt-'+s);try{i[s]=JSON.parse(_t3)}catch(e){i[s]=_t3}}else i[s]=e[s]}return i}}],[{key:'init',value:function init(e,i){e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=[].slice.call(e)),e instanceof Array&&e.forEach(function(e){'vanillaTilt'in e||(e.vanillaTilt=new t(e,i))})}}]);return t}();return'undefined'!=typeof document&&(window.VanillaTilt=t,t.init(document.querySelectorAll('[data-tilt]'))),t}();