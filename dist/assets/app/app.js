"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var canvas=document.querySelector(".noise"),ctx=canvas.getContext("2d");function noise(e){for(var t=e.canvas.width,i=e.canvas.height,n=e.createImageData(t,i),s=new Uint32Array(n.data.buffer),a=0;a<s.length;a++)s[a]=(30*Math.random()|0)<<24;e.putImageData(n,0,0)}function loop(){var e=!0;(e=!e)||noise(ctx),requestAnimationFrame(loop)}canvas.width=window.innerWidth,canvas.height=window.innerHeight,window.addEventListener("resize",function(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}),loop(),window.addEventListener("scroll",function(){var e=Array.from(document.querySelectorAll(".cardimg__item")),i=document.querySelector("body"),t=document.querySelector(".contact"),n=document.querySelector(".logo svg .c"),s=document.querySelector(".logo svg .d"),a=Array.from(document.querySelectorAll(".nav ul li a"));if(3.1*window.pageYOffset>canvas.height)for(var l=0;l<e.length;l++)e[l].classList.add("cardimg--reveal");function r(){if(window.pageYOffset+400>canvas.height){i.style.backgroundColor="var(--bookopus)",n.style.fill="var(--light)",s.style.stroke="var(--dark)";for(var e=0;e<a.length;e++)a[e].style.color="var(--dark)"}else{i.style.backgroundColor="var(--light)",n.style.fill="var(--cta)",s.style.stroke="var(--dark)";for(var t=0;t<a.length;t++)a[t].style.color="var(--dark)"}}if(r(),window.pageYOffset+t.scrollHeight-450>canvas.height+t.scrollHeight){i.style.backgroundColor="var(--dark)",n.style.fill="var(--cta)",s.style.stroke="var(--light)";for(var o=0;o<a.length;o++)a[o].style.color="var(--light)"}else(window.pageYOffset+200>canvas.height||window.pageYOffset+t.scrollHeight-900<canvas.height+t.scrollHeight)&&r()});var VanillaTilt=function(){var e=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,i),!(e instanceof Node))throw"Can't initialize VanillaTilt because "+e+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=e,this.settings=this.extendSettings(t),this.reverse=this.settings.reverse?-1:1,this.glare=this.isSettingTrue(this.settings.glare),this.glarePrerender=this.isSettingTrue(this.settings["glare-prerender"]),this.glare&&this.prepareGlare(),this.addEventListeners()}return _createClass(i,[{key:"isSettingTrue",value:function(e){return""===e||!0===e||1===e}},{key:"addEventListeners",value:function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResizeBind.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind),this.glare&&window.addEventListener("resize",this.onWindowResizeBind)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind),this.glare&&window.removeEventListener("resize",this.onWindowResizeBind)}},{key:"destroy",value:function(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}},{key:"onMouseEnter",value:function(e){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}},{key:"onMouseMove",value:function(e){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:"onMouseLeave",value:function(e){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}},{key:"reset",value:function(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")}},{key:"getValues",value:function(){var e=(this.event.clientX-this.left)/this.width,t=(this.event.clientY-this.top)/this.height;return e=Math.min(Math.max(e,0),1),t=Math.min(Math.max(t,0),1),{tiltX:(this.reverse*(this.settings.max/2-e*this.settings.max)).toFixed(2),tiltY:(this.reverse*(t*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*e,percentageY:100*t,angle:Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI)}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(){var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:e.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate("+e.angle+"deg) translate(-50%, -50%)",this.glareElement.style.opacity=""+e.percentageY*this.settings["max-glare"]/100),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:e})),this.updateCall=null}},{key:"prepareGlare",value:function(){if(!this.glarePrerender){var e=document.createElement("div");e.classList.add("js-tilt-glare");var t=document.createElement("div");t.classList.add("js-tilt-glare-inner"),e.appendChild(t),this.element.appendChild(e)}this.glareElementWrapper=this.element.querySelector(".js-tilt-glare"),this.glareElement=this.element.querySelector(".js-tilt-glare-inner"),this.glarePrerender||(Object.assign(this.glareElementWrapper.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}),Object.assign(this.glareElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:2*this.element.offsetWidth+"px",height:2*this.element.offsetWidth+"px",transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}))}},{key:"updateGlareSize",value:function(){Object.assign(this.glareElement.style,{width:""+2*this.element.offsetWidth,height:""+2*this.element.offsetWidth})}},{key:"onWindowResizeBind",value:function(){this.updateGlareSize()}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.glare&&(this.glareElement.style.transition="opacity "+this.settings.speed+"ms "+this.settings.easing),this.transitionTimeout=setTimeout(function(){e.element.style.transition="",e.glare&&(e.glareElement.style.transition="")},this.settings.speed)}},{key:"extendSettings",value:function(e){var t={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,glare:!1,"max-glare":1,"glare-prerender":!1,reset:!0},i={};for(var n in t)if(n in e)i[n]=e[n];else if(this.element.hasAttribute("data-tilt-"+n)){var s=this.element.getAttribute("data-tilt-"+n);try{i[n]=JSON.parse(s)}catch(t){i[n]=s}}else i[n]=t[n];return i}}],[{key:"init",value:function(e,t){e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=[].slice.call(e)),e instanceof Array&&e.forEach(function(e){"vanillaTilt"in e||(e.vanillaTilt=new i(e,t))})}}]),i}();return"undefined"!=typeof document&&(window.VanillaTilt=e).init(document.querySelectorAll("[data-tilt]")),e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInZlbmRvcnMvdmFuaWxsYS10aWx0Lm1pbi5qcyJdLCJuYW1lcyI6WyJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdHgiLCJnZXRDb250ZXh0Iiwibm9pc2UiLCJuZGF0YSIsImNyZWF0ZUltYWdlRGF0YSIsInciLCJoIiwid2luZG93IiwiaSIsImJ1ZmZlcjMyIiwibGVuZ3RoIiwiTWF0aCIsInJhbmRvbSIsInB1dEltYWdlRGF0YSIsImxvb3AiLCJ0b2dnbGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWN0IiwibG9nb091dGVyIiwibGlua3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FyZEl0ZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJjaGVja1dvcmtzIiwicGFnZVlPZmZzZXQiLCJib2R5Iiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJsb2dvSW5uZXIiLCJmaWxsIiwic3Ryb2tlIiwiY29sb3IiLCJzY3JvbGxIZWlnaHQiLCJWYW5pbGxhVGlsdCIsInQiLCJlIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIk5vZGUiLCJsZWZ0IiwidG9wIiwidHJhbnNpdGlvblRpbWVvdXQiLCJ1cGRhdGVDYWxsIiwidXBkYXRlQmluZCIsInVwZGF0ZSIsImJpbmQiLCJyZXNldEJpbmQiLCJyZXNldCIsImVsZW1lbnQiLCJzZXR0aW5ncyIsImV4dGVuZFNldHRpbmdzIiwicmV2ZXJzZSIsImdsYXJlIiwiaXNTZXR0aW5nVHJ1ZSIsImdsYXJlUHJlcmVuZGVyIiwicHJlcGFyZUdsYXJlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsIm9uTW91c2VFbnRlckJpbmQiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTW92ZUJpbmQiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VMZWF2ZUJpbmQiLCJvbk1vdXNlTGVhdmUiLCJvbldpbmRvd1Jlc2l6ZUJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJUaW1lb3V0IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInZhbmlsbGFUaWx0IiwidXBkYXRlRWxlbWVudFBvc2l0aW9uIiwid2lsbENoYW5nZSIsInNldFRyYW5zaXRpb24iLCJldmVudCIsInBhZ2VYIiwicGFnZVkiLCJ0cmFuc2Zvcm0iLCJwZXJzcGVjdGl2ZSIsImdsYXJlRWxlbWVudCIsIm9wYWNpdHkiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1pbiIsIm1heCIsInRpbHRYIiwidG9GaXhlZCIsInRpbHRZIiwicGVyY2VudGFnZVgiLCJwZXJjZW50YWdlWSIsImFuZ2xlIiwiYXRhbjIiLCJQSSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiZ2V0VmFsdWVzIiwiYXhpcyIsInNjYWxlIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZ2xhcmVFbGVtZW50V3JhcHBlciIsIk9iamVjdCIsImFzc2lnbiIsInBvc2l0aW9uIiwib3ZlcmZsb3ciLCJwb2ludGVyLWV2ZW50cyIsImJhY2tncm91bmQtaW1hZ2UiLCJ0cmFuc2Zvcm0tb3JpZ2luIiwidXBkYXRlR2xhcmVTaXplIiwiX3RoaXMiLCJ0cmFuc2l0aW9uIiwic3BlZWQiLCJlYXNpbmciLCJzZXRUaW1lb3V0IiwibWF4LWdsYXJlIiwiZ2xhcmUtcHJlcmVuZGVyIiwicyIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsIk5vZGVMaXN0Iiwic2xpY2UiLCJjYWxsIiwiZm9yRWFjaCIsImluaXQiXSwibWFwcGluZ3MiOiI2WEFDQSxJQUFB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R0FBQW5DLEVBQUEySCxHQUFBekYsUUFBQWxDLEVBQUEySCxHQUFBeEYsRUFBQXdGLEdBQUEsT0FBQTNILEtBQUEsQ0FBQSxDQUFBNEQsSUFBQSxPQUFBQyxNQUFBLFNBQUExQixFQUFBbkMsR0FBQW1DLGFBQUFLLE9BQUFMLEVBQUEsQ0FBQUEsSUFBQUEsYUFBQTZGLFdBQUE3RixFQUFBLEdBQUE4RixNQUFBQyxLQUFBL0YsSUFBQUEsYUFBQWxCLE9BQUFrQixFQUFBZ0csUUFBQSxTQUFBaEcsR0FBQSxnQkFBQUEsSUFBQUEsRUFBQXNDLFlBQUEsSUFBQXZDLEVBQUFDLEVBQUFuQyxVQUFBa0MsRUFBQSxHQUFBLE1BQUEsb0JBQUE1QyxXQUFBUyxPQUFBa0MsWUFBQUMsR0FBQWtHLEtBQUE5SSxTQUFBNkIsaUJBQUEsZ0JBQUFlLEVBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tTm9pc2UtQmFja2dyb3VuZC0tLS0tLS0tLS0vL1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm9pc2UnKTtcclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDt9KTtcclxuXHJcbmZ1bmN0aW9uIG5vaXNlKGN0eCl7XHJcbiAgICBsZXQgdyA9IGN0eC5jYW52YXMud2lkdGg7XHJcbiAgICBsZXQgaCA9IGN0eC5jYW52YXMuaGVpZ2h0O1xyXG4gICAgY29uc3QgbmRhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHcsIGgpO1xyXG4gICAgY29uc3QgYnVmZmVyMzIgPSBuZXcgVWludDMyQXJyYXkobmRhdGEuZGF0YS5idWZmZXIpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyMzIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBidWZmZXIzMltpXSA9ICgoMzAgKiBNYXRoLnJhbmRvbSgpKSB8MCkgPDwgMjQ7XHJcbiAgICB9XHJcbiAgICBjdHgucHV0SW1hZ2VEYXRhKG5kYXRhLCAwLCAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9vcCgpe1xyXG4gICAgbGV0IHRvZ2dsZSA9IHRydWU7XHJcbiAgICB0b2dnbGUgPSAhdG9nZ2xlO1xyXG4gICAgaWYgKHRvZ2dsZSl7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH0gXHJcbiAgICBub2lzZShjdHgpO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG59XHJcbmxvb3AoKTtcclxuXHJcbi8vLS0tLS0tLS0tLVNjcm9sbCBFZmZlY3RzLS0tLS0tLS0tLS8vXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICBsZXQgY2FyZEl0ZW0gPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkaW1nX19pdGVtJykpXHJcbiAgICBsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxyXG4gICAgbGV0IGNvbnRhY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdCcpXHJcbiAgICBsZXQgbG9nb0lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ28gc3ZnIC5jJylcclxuICAgIGxldCBsb2dvT3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9nbyBzdmcgLmQnKVxyXG4gICAgbGV0IGxpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2IHVsIGxpIGEnKSlcclxuXHJcbiAgICBpZih3aW5kb3cucGFnZVlPZmZzZXQgKiAzLjEgPiBjYW52YXMuaGVpZ2h0KXtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2FyZEl0ZW0ubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBjYXJkSXRlbVtpXS5jbGFzc0xpc3QuYWRkKCdjYXJkaW1nLS1yZXZlYWwnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoZWNrV29ya3MoKXtcclxuICAgICAgICBpZih3aW5kb3cucGFnZVlPZmZzZXQgKyA0MDAgPiBjYW52YXMuaGVpZ2h0KXtcclxuICAgICAgICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWJvb2tvcHVzKVwiXHJcbiAgICAgICAgICAgIGxvZ29Jbm5lci5zdHlsZS5maWxsID0gXCJ2YXIoLS1saWdodClcIlxyXG4gICAgICAgICAgICBsb2dvT3V0ZXIuc3R5bGUuc3Ryb2tlID0gXCJ2YXIoLS1kYXJrKVwiXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBsaW5rc1tpXS5zdHlsZS5jb2xvciA9IFwidmFyKC0tZGFyaylcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICBlbHNleyAvKiBEZWZhdWx0IFZhbHVlcyAqL1xyXG4gICAgICAgICAgICBib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tbGlnaHQpXCJcclxuICAgICAgICAgICAgbG9nb0lubmVyLnN0eWxlLmZpbGwgPSBcInZhcigtLWN0YSlcIlxyXG4gICAgICAgICAgICBsb2dvT3V0ZXIuc3R5bGUuc3Ryb2tlID0gXCJ2YXIoLS1kYXJrKVwiXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBsaW5rc1tpXS5zdHlsZS5jb2xvciA9IFwidmFyKC0tZGFyaylcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hlY2tXb3JrcygpO1xyXG4gICAgaWYod2luZG93LnBhZ2VZT2Zmc2V0ICsgY29udGFjdC5zY3JvbGxIZWlnaHQgLSA0NTAgID4gY2FudmFzLmhlaWdodCArICBjb250YWN0LnNjcm9sbEhlaWdodCApe1xyXG4gICAgICAgIGJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1kYXJrKVwiXHJcbiAgICAgICAgbG9nb0lubmVyLnN0eWxlLmZpbGwgPSBcInZhcigtLWN0YSlcIlxyXG4gICAgICAgIGxvZ29PdXRlci5zdHlsZS5zdHJva2UgPSBcInZhcigtLWxpZ2h0KVwiXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgbGlua3NbaV0uc3R5bGUuY29sb3IgPSBcInZhcigtLWxpZ2h0KVwiXHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2UgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCArIDIwMCA+IGNhbnZhcy5oZWlnaHQgfHwgd2luZG93LnBhZ2VZT2Zmc2V0ICsgY29udGFjdC5zY3JvbGxIZWlnaHQgLSA5MDAgIDwgY2FudmFzLmhlaWdodCArICBjb250YWN0LnNjcm9sbEhlaWdodCl7XHJcbiAgICAgICAgY2hlY2tXb3JrcygpO1xyXG4gICAgfVxyXG59KVxyXG5cclxuXHJcbiIsInZhciBWYW5pbGxhVGlsdD1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2NsYXNzIHR7Y29uc3RydWN0b3IodCxlPXt9KXtpZighKHQgaW5zdGFuY2VvZiBOb2RlKSl0aHJvd1wiQ2FuJ3QgaW5pdGlhbGl6ZSBWYW5pbGxhVGlsdCBiZWNhdXNlIFwiK3QrXCIgaXMgbm90IGEgTm9kZS5cIjt0aGlzLndpZHRoPW51bGwsdGhpcy5oZWlnaHQ9bnVsbCx0aGlzLmxlZnQ9bnVsbCx0aGlzLnRvcD1udWxsLHRoaXMudHJhbnNpdGlvblRpbWVvdXQ9bnVsbCx0aGlzLnVwZGF0ZUNhbGw9bnVsbCx0aGlzLnVwZGF0ZUJpbmQ9dGhpcy51cGRhdGUuYmluZCh0aGlzKSx0aGlzLnJlc2V0QmluZD10aGlzLnJlc2V0LmJpbmQodGhpcyksdGhpcy5lbGVtZW50PXQsdGhpcy5zZXR0aW5ncz10aGlzLmV4dGVuZFNldHRpbmdzKGUpLHRoaXMucmV2ZXJzZT10aGlzLnNldHRpbmdzLnJldmVyc2U/LTE6MSx0aGlzLmdsYXJlPXRoaXMuaXNTZXR0aW5nVHJ1ZSh0aGlzLnNldHRpbmdzLmdsYXJlKSx0aGlzLmdsYXJlUHJlcmVuZGVyPXRoaXMuaXNTZXR0aW5nVHJ1ZSh0aGlzLnNldHRpbmdzW1wiZ2xhcmUtcHJlcmVuZGVyXCJdKSx0aGlzLmdsYXJlJiZ0aGlzLnByZXBhcmVHbGFyZSgpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKX1pc1NldHRpbmdUcnVlKHQpe3JldHVyblwiXCI9PT10fHwhMD09PXR8fDE9PT10fWFkZEV2ZW50TGlzdGVuZXJzKCl7dGhpcy5vbk1vdXNlRW50ZXJCaW5kPXRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcyksdGhpcy5vbk1vdXNlTW92ZUJpbmQ9dGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpLHRoaXMub25Nb3VzZUxlYXZlQmluZD10aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpLHRoaXMub25XaW5kb3dSZXNpemVCaW5kPXRoaXMub25XaW5kb3dSZXNpemVCaW5kLmJpbmQodGhpcyksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5vbk1vdXNlRW50ZXJCaW5kKSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmVCaW5kKSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLm9uTW91c2VMZWF2ZUJpbmQpLHRoaXMuZ2xhcmUmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQpfXJlbW92ZUV2ZW50TGlzdGVuZXJzKCl7dGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5vbk1vdXNlRW50ZXJCaW5kKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmVCaW5kKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLm9uTW91c2VMZWF2ZUJpbmQpLHRoaXMuZ2xhcmUmJndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQpfWRlc3Ryb3koKXtjbGVhclRpbWVvdXQodGhpcy50cmFuc2l0aW9uVGltZW91dCksbnVsbCE9PXRoaXMudXBkYXRlQ2FsbCYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVDYWxsKSx0aGlzLnJlc2V0KCksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpLHRoaXMuZWxlbWVudC52YW5pbGxhVGlsdD1udWxsLGRlbGV0ZSB0aGlzLmVsZW1lbnQudmFuaWxsYVRpbHQsdGhpcy5lbGVtZW50PW51bGx9b25Nb3VzZUVudGVyKHQpe3RoaXMudXBkYXRlRWxlbWVudFBvc2l0aW9uKCksdGhpcy5lbGVtZW50LnN0eWxlLndpbGxDaGFuZ2U9XCJ0cmFuc2Zvcm1cIix0aGlzLnNldFRyYW5zaXRpb24oKX1vbk1vdXNlTW92ZSh0KXtudWxsIT09dGhpcy51cGRhdGVDYWxsJiZjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUNhbGwpLHRoaXMuZXZlbnQ9dCx0aGlzLnVwZGF0ZUNhbGw9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQmluZCl9b25Nb3VzZUxlYXZlKHQpe3RoaXMuc2V0VHJhbnNpdGlvbigpLHRoaXMuc2V0dGluZ3MucmVzZXQmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlc2V0QmluZCl9cmVzZXQoKXt0aGlzLmV2ZW50PXtwYWdlWDp0aGlzLmxlZnQrdGhpcy53aWR0aC8yLHBhZ2VZOnRoaXMudG9wK3RoaXMuaGVpZ2h0LzJ9LHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm09XCJwZXJzcGVjdGl2ZShcIit0aGlzLnNldHRpbmdzLnBlcnNwZWN0aXZlK1wicHgpIHJvdGF0ZVgoMGRlZykgcm90YXRlWSgwZGVnKSBzY2FsZTNkKDEsIDEsIDEpXCIsdGhpcy5nbGFyZSYmKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybT1cInJvdGF0ZSgxODBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiLHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLm9wYWNpdHk9XCIwXCIpfWdldFZhbHVlcygpe2xldCB0PSh0aGlzLmV2ZW50LmNsaWVudFgtdGhpcy5sZWZ0KS90aGlzLndpZHRoLGU9KHRoaXMuZXZlbnQuY2xpZW50WS10aGlzLnRvcCkvdGhpcy5oZWlnaHQ7cmV0dXJuIHQ9TWF0aC5taW4oTWF0aC5tYXgodCwwKSwxKSxlPU1hdGgubWluKE1hdGgubWF4KGUsMCksMSkse3RpbHRYOih0aGlzLnJldmVyc2UqKHRoaXMuc2V0dGluZ3MubWF4LzItdCp0aGlzLnNldHRpbmdzLm1heCkpLnRvRml4ZWQoMiksdGlsdFk6KHRoaXMucmV2ZXJzZSooZSp0aGlzLnNldHRpbmdzLm1heC10aGlzLnNldHRpbmdzLm1heC8yKSkudG9GaXhlZCgyKSxwZXJjZW50YWdlWDoxMDAqdCxwZXJjZW50YWdlWToxMDAqZSxhbmdsZTpNYXRoLmF0YW4yKHRoaXMuZXZlbnQuY2xpZW50WC0odGhpcy5sZWZ0K3RoaXMud2lkdGgvMiksLSh0aGlzLmV2ZW50LmNsaWVudFktKHRoaXMudG9wK3RoaXMuaGVpZ2h0LzIpKSkqKDE4MC9NYXRoLlBJKX19dXBkYXRlRWxlbWVudFBvc2l0aW9uKCl7bGV0IHQ9dGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMud2lkdGg9dGhpcy5lbGVtZW50Lm9mZnNldFdpZHRoLHRoaXMuaGVpZ2h0PXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQsdGhpcy5sZWZ0PXQubGVmdCx0aGlzLnRvcD10LnRvcH11cGRhdGUoKXtsZXQgdD10aGlzLmdldFZhbHVlcygpO3RoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm09XCJwZXJzcGVjdGl2ZShcIit0aGlzLnNldHRpbmdzLnBlcnNwZWN0aXZlK1wicHgpIHJvdGF0ZVgoXCIrKFwieFwiPT09dGhpcy5zZXR0aW5ncy5heGlzPzA6dC50aWx0WSkrXCJkZWcpIHJvdGF0ZVkoXCIrKFwieVwiPT09dGhpcy5zZXR0aW5ncy5heGlzPzA6dC50aWx0WCkrXCJkZWcpIHNjYWxlM2QoXCIrdGhpcy5zZXR0aW5ncy5zY2FsZStcIiwgXCIrdGhpcy5zZXR0aW5ncy5zY2FsZStcIiwgXCIrdGhpcy5zZXR0aW5ncy5zY2FsZStcIilcIix0aGlzLmdsYXJlJiYodGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtPWByb3RhdGUoJHt0LmFuZ2xlfWRlZykgdHJhbnNsYXRlKC01MCUsIC01MCUpYCx0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS5vcGFjaXR5PWAke3QucGVyY2VudGFnZVkqdGhpcy5zZXR0aW5nc1tcIm1heC1nbGFyZVwiXS8xMDB9YCksdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidGlsdENoYW5nZVwiLHtkZXRhaWw6dH0pKSx0aGlzLnVwZGF0ZUNhbGw9bnVsbH1wcmVwYXJlR2xhcmUoKXtpZighdGhpcy5nbGFyZVByZXJlbmRlcil7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NMaXN0LmFkZChcImpzLXRpbHQtZ2xhcmVcIik7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcImpzLXRpbHQtZ2xhcmUtaW5uZXJcIiksdC5hcHBlbmRDaGlsZChlKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodCl9dGhpcy5nbGFyZUVsZW1lbnRXcmFwcGVyPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLXRpbHQtZ2xhcmVcIiksdGhpcy5nbGFyZUVsZW1lbnQ9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtdGlsdC1nbGFyZS1pbm5lclwiKSx0aGlzLmdsYXJlUHJlcmVuZGVyfHwoT2JqZWN0LmFzc2lnbih0aGlzLmdsYXJlRWxlbWVudFdyYXBwZXIuc3R5bGUse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCIwXCIsbGVmdDpcIjBcIix3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLE9iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCI1MCVcIixsZWZ0OlwiNTAlXCIsXCJwb2ludGVyLWV2ZW50c1wiOlwibm9uZVwiLFwiYmFja2dyb3VuZC1pbWFnZVwiOmBsaW5lYXItZ3JhZGllbnQoMGRlZywgcmdiYSgyNTUsMjU1LDI1NSwwKSAwJSwgcmdiYSgyNTUsMjU1LDI1NSwxKSAxMDAlKWAsd2lkdGg6YCR7Mip0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9cHhgLGhlaWdodDpgJHsyKnRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aH1weGAsdHJhbnNmb3JtOlwicm90YXRlKDE4MGRlZykgdHJhbnNsYXRlKC01MCUsIC01MCUpXCIsXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6XCIwJSAwJVwiLG9wYWNpdHk6XCIwXCJ9KSl9dXBkYXRlR2xhcmVTaXplKCl7T2JqZWN0LmFzc2lnbih0aGlzLmdsYXJlRWxlbWVudC5zdHlsZSx7d2lkdGg6YCR7Mip0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9YCxoZWlnaHQ6YCR7Mip0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9YH0pfW9uV2luZG93UmVzaXplQmluZCgpe3RoaXMudXBkYXRlR2xhcmVTaXplKCl9c2V0VHJhbnNpdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRyYW5zaXRpb25UaW1lb3V0KSx0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbj10aGlzLnNldHRpbmdzLnNwZWVkK1wibXMgXCIrdGhpcy5zZXR0aW5ncy5lYXNpbmcsdGhpcy5nbGFyZSYmKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zaXRpb249YG9wYWNpdHkgJHt0aGlzLnNldHRpbmdzLnNwZWVkfW1zICR7dGhpcy5zZXR0aW5ncy5lYXNpbmd9YCksdGhpcy50cmFuc2l0aW9uVGltZW91dD1zZXRUaW1lb3V0KCgpPT57dGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb249XCJcIjt0aGlzLmdsYXJlJiYodGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbj1cIlwiKX0sdGhpcy5zZXR0aW5ncy5zcGVlZCl9ZXh0ZW5kU2V0dGluZ3ModCl7bGV0IGU9e3JldmVyc2U6ITEsbWF4OjM1LHBlcnNwZWN0aXZlOjFlMyxlYXNpbmc6XCJjdWJpYy1iZXppZXIoLjAzLC45OCwuNTIsLjk5KVwiLHNjYWxlOlwiMVwiLHNwZWVkOlwiMzAwXCIsdHJhbnNpdGlvbjohMCxheGlzOm51bGwsZ2xhcmU6ITEsXCJtYXgtZ2xhcmVcIjoxLFwiZ2xhcmUtcHJlcmVuZGVyXCI6ITEscmVzZXQ6ITB9LGk9e307Zm9yKHZhciBzIGluIGUpaWYocyBpbiB0KWlbc109dFtzXTtlbHNlIGlmKHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXRpbHQtXCIrcykpe2xldCB0PXRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRpbHQtXCIrcyk7dHJ5e2lbc109SlNPTi5wYXJzZSh0KX1jYXRjaChlKXtpW3NdPXR9fWVsc2UgaVtzXT1lW3NdO3JldHVybiBpfXN0YXRpYyBpbml0KGUsaSl7ZSBpbnN0YW5jZW9mIE5vZGUmJihlPVtlXSksZSBpbnN0YW5jZW9mIE5vZGVMaXN0JiYoZT1bXS5zbGljZS5jYWxsKGUpKSxlIGluc3RhbmNlb2YgQXJyYXkmJmUuZm9yRWFjaChlPT57XCJ2YW5pbGxhVGlsdFwiaW4gZXx8KGUudmFuaWxsYVRpbHQ9bmV3IHQoZSxpKSl9KX19cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiYod2luZG93LlZhbmlsbGFUaWx0PXQsdC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10aWx0XVwiKSkpLHR9KCk7Il19
