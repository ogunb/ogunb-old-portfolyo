"use strict";var _createClass=function(){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var canvas=document.querySelector(".noise");canvas.width=window.innerWidth,canvas.height=window.innerHeight,window.addEventListener("resize",function(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}),window.addEventListener("scroll",function(){var e=Array.from(document.querySelectorAll(".cardimg__item")),i=document.querySelector("body"),t=document.querySelector(".contact"),s=document.querySelector(".logo svg .c"),n=document.querySelector(".logo svg .d"),a=Array.from(document.querySelectorAll(".nav ul li a"));if(3.1*window.pageYOffset>canvas.height)for(var l=0;l<e.length;l++)e[l].classList.add("cardimg--reveal");function r(){if(window.pageYOffset+50>canvas.height){if(i.style.backgroundColor="var(--bookopus)",900<canvas.width){s.style.fill="var(--light)",n.style.stroke="var(--dark)";for(var e=0;e<a.length;e++)a[e].style.color="var(--dark)"}}else if(i.style.backgroundColor="var(--light)",900<canvas.width){s.style.fill="var(--cta)",n.style.stroke="var(--dark)";for(var t=0;t<a.length;t++)a[t].style.color="var(--dark)"}}if(r(),window.pageYOffset+t.scrollHeight-450>canvas.height+t.scrollHeight){if(i.style.backgroundColor="var(--dark)",900<canvas.width){s.style.fill="var(--cta)",n.style.stroke="var(--light)";for(var o=0;o<a.length;o++)a[o].style.color="var(--light)"}}else(window.pageYOffset+200>canvas.height||window.pageYOffset+t.scrollHeight-900<canvas.height+t.scrollHeight)&&r()});var menu=document.querySelector(".mobile-nav--menu");menu.addEventListener("click",function(){var e=document.querySelector(".mobile-nav .logo .c"),t=document.querySelector("body"),i=document.querySelector(".mobile-nav__links");menu.classList.toggle("active"),!0===menu.classList.contains("active")?(e.style.fill="var(--light)",t.style.overflowY="hidden",i.style.opacity="1",i.style.transform="scale(1)"):(e.style.fill="var(--cta)",t.style.overflowY="visible",i.style.opacity="0",i.style.transform="scale(1, 0)")});var VanillaTilt=function(){var e=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,i),!(e instanceof Node))throw"Can't initialize VanillaTilt because "+e+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=e,this.settings=this.extendSettings(t),this.reverse=this.settings.reverse?-1:1,this.glare=this.isSettingTrue(this.settings.glare),this.glarePrerender=this.isSettingTrue(this.settings["glare-prerender"]),this.glare&&this.prepareGlare(),this.addEventListeners()}return _createClass(i,[{key:"isSettingTrue",value:function(e){return""===e||!0===e||1===e}},{key:"addEventListeners",value:function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResizeBind.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind),this.glare&&window.addEventListener("resize",this.onWindowResizeBind)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind),this.glare&&window.removeEventListener("resize",this.onWindowResizeBind)}},{key:"destroy",value:function(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}},{key:"onMouseEnter",value:function(e){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}},{key:"onMouseMove",value:function(e){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:"onMouseLeave",value:function(e){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}},{key:"reset",value:function(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)",this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")}},{key:"getValues",value:function(){var e=(this.event.clientX-this.left)/this.width,t=(this.event.clientY-this.top)/this.height;return e=Math.min(Math.max(e,0),1),t=Math.min(Math.max(t,0),1),{tiltX:(this.reverse*(this.settings.max/2-e*this.settings.max)).toFixed(2),tiltY:(this.reverse*(t*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*e,percentageY:100*t,angle:Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI)}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(){var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:e.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate("+e.angle+"deg) translate(-50%, -50%)",this.glareElement.style.opacity=""+e.percentageY*this.settings["max-glare"]/100),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:e})),this.updateCall=null}},{key:"prepareGlare",value:function(){if(!this.glarePrerender){var e=document.createElement("div");e.classList.add("js-tilt-glare");var t=document.createElement("div");t.classList.add("js-tilt-glare-inner"),e.appendChild(t),this.element.appendChild(e)}this.glareElementWrapper=this.element.querySelector(".js-tilt-glare"),this.glareElement=this.element.querySelector(".js-tilt-glare-inner"),this.glarePrerender||(Object.assign(this.glareElementWrapper.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}),Object.assign(this.glareElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:2*this.element.offsetWidth+"px",height:2*this.element.offsetWidth+"px",transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}))}},{key:"updateGlareSize",value:function(){Object.assign(this.glareElement.style,{width:""+2*this.element.offsetWidth,height:""+2*this.element.offsetWidth})}},{key:"onWindowResizeBind",value:function(){this.updateGlareSize()}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.glare&&(this.glareElement.style.transition="opacity "+this.settings.speed+"ms "+this.settings.easing),this.transitionTimeout=setTimeout(function(){e.element.style.transition="",e.glare&&(e.glareElement.style.transition="")},this.settings.speed)}},{key:"extendSettings",value:function(e){var t={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,glare:!1,"max-glare":1,"glare-prerender":!1,reset:!0},i={};for(var s in t)if(s in e)i[s]=e[s];else if(this.element.hasAttribute("data-tilt-"+s)){var n=this.element.getAttribute("data-tilt-"+s);try{i[s]=JSON.parse(n)}catch(t){i[s]=n}}else i[s]=t[s];return i}}],[{key:"init",value:function(e,t){e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=[].slice.call(e)),e instanceof Array&&e.forEach(function(e){"vanillaTilt"in e||(e.vanillaTilt=new i(e,t))})}}]),i}();return"undefined"!=typeof document&&(window.VanillaTilt=e).init(document.querySelectorAll("[data-tilt]")),e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInZlbmRvcnMvdmFuaWxsYS10aWx0Lm1pbi5qcyJdLCJuYW1lcyI6WyJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYXJkSXRlbSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJib2R5IiwiY29udGFjdCIsImxvZ29Jbm5lciIsImxvZ29PdXRlciIsImxpbmtzIiwiaSIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsImNoZWNrV29ya3MiLCJwYWdlWU9mZnNldCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmlsbCIsImNvbG9yIiwic3Ryb2tlIiwic2Nyb2xsSGVpZ2h0IiwibWVudSIsImxvZ28iLCJ0b2dnbGUiLCJjb250YWlucyIsIm92ZXJmbG93WSIsInRyYW5zZm9ybSIsIlZhbmlsbGFUaWx0IiwidCIsImUiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiTm9kZSIsImxlZnQiLCJ0b3AiLCJ0cmFuc2l0aW9uVGltZW91dCIsInVwZGF0ZUNhbGwiLCJ1cGRhdGVCaW5kIiwidXBkYXRlIiwiYmluZCIsInJlc2V0QmluZCIsInJlc2V0IiwiZWxlbWVudCIsInNldHRpbmdzIiwiZXh0ZW5kU2V0dGluZ3MiLCJyZXZlcnNlIiwiZ2xhcmUiLCJpc1NldHRpbmdUcnVlIiwiZ2xhcmVQcmVyZW5kZXIiLCJwcmVwYXJlR2xhcmUiLCJhZGRFdmVudExpc3RlbmVycyIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwib25Nb3VzZUVudGVyQmluZCIsIm9uTW91c2VFbnRlciIsIm9uTW91c2VNb3ZlQmluZCIsIm9uTW91c2VNb3ZlIiwib25Nb3VzZUxlYXZlQmluZCIsIm9uTW91c2VMZWF2ZSIsIm9uV2luZG93UmVzaXplQmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGVhclRpbWVvdXQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwidmFuaWxsYVRpbHQiLCJ1cGRhdGVFbGVtZW50UG9zaXRpb24iLCJ3aWxsQ2hhbmdlIiwic2V0VHJhbnNpdGlvbiIsImV2ZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicGFnZVgiLCJwYWdlWSIsInBlcnNwZWN0aXZlIiwiZ2xhcmVFbGVtZW50Iiwib3BhY2l0eSIsImNsaWVudFgiLCJjbGllbnRZIiwiTWF0aCIsIm1pbiIsIm1heCIsInRpbHRYIiwidG9GaXhlZCIsInRpbHRZIiwicGVyY2VudGFnZVgiLCJwZXJjZW50YWdlWSIsImFuZ2xlIiwiYXRhbjIiLCJQSSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiZ2V0VmFsdWVzIiwiYXhpcyIsInNjYWxlIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZ2xhcmVFbGVtZW50V3JhcHBlciIsIk9iamVjdCIsImFzc2lnbiIsInBvc2l0aW9uIiwib3ZlcmZsb3ciLCJwb2ludGVyLWV2ZW50cyIsImJhY2tncm91bmQtaW1hZ2UiLCJ0cmFuc2Zvcm0tb3JpZ2luIiwidXBkYXRlR2xhcmVTaXplIiwiX3RoaXMiLCJ0cmFuc2l0aW9uIiwic3BlZWQiLCJlYXNpbmciLCJzZXRUaW1lb3V0IiwibWF4LWdsYXJlIiwiZ2xhcmUtcHJlcmVuZGVyIiwicyIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsIk5vZGVMaXN0Iiwic2xpY2UiLCJjYWxsIiwiZm9yRWFjaCIsImluaXQiXSwibWFwcGluZ3MiOiI2WEFDQSxJQUFBQSxPQUFBQyxTQUFBQyxjQUFBLFVBRUFGLE9BQUFHLE1BQUFDLE9BQUFDLFdBQ0FMLE9BQUFNLE9BQUFGLE9BQUFH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RyxHQUFBMUYsUUFBQW5CLEVBQUE2RyxHQUFBekYsRUFBQXlGLEdBQUEsT0FBQTdHLEtBQUEsQ0FBQSxDQUFBNkMsSUFBQSxPQUFBQyxNQUFBLFNBQUExQixFQUFBcEIsR0FBQW9CLGFBQUFLLE9BQUFMLEVBQUEsQ0FBQUEsSUFBQUEsYUFBQThGLFdBQUE5RixFQUFBLEdBQUErRixNQUFBQyxLQUFBaEcsSUFBQUEsYUFBQTVCLE9BQUE0QixFQUFBaUcsUUFBQSxTQUFBakcsR0FBQSxnQkFBQUEsSUFBQUEsRUFBQXNDLFlBQUEsSUFBQXZDLEVBQUFDLEVBQUFwQixVQUFBbUIsRUFBQSxHQUFBLE1BQUEsb0JBQUFwQyxXQUFBRyxPQUFBZ0MsWUFBQUMsR0FBQW1HLEtBQUF2SSxTQUFBVyxpQkFBQSxnQkFBQXlCLEVBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tTm9pc2UtQmFja2dyb3VuZC0tLS0tLS0tLS0vL1xyXG5sZXQgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vaXNlJyk7XHJcbi8vIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge2NhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O30pO1xyXG5cclxuLy8gKGZ1bmN0aW9uKCkge1xyXG4vLyAgICAgdmFyIGJ1ZmZlcmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4vLyAgICAgdmFyIGJ1ZmZlcmN0eCA9IGJ1ZmZlcmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4vLyAgICAgdmFyIFdJRFRIID0gMTAwO1xyXG4vLyAgICAgdmFyIEhFSUdIVCA9IDEwMDtcclxuLy8gICAgIGJ1ZmZlcmNhbnZhcy53aWR0aCA9IFdJRFRIO1xyXG4vLyAgICAgYnVmZmVyY2FudmFzLmhlaWdodCA9IEhFSUdIVDtcclxuLy8gICAgIGJ1ZmZlcmNhbnZhcy5maWxsU3R5bGUgPSAnIzAwMCc7XHJcbiAgXHJcbi8vICAgICBmdW5jdGlvbiByYW5kKG51bSkge1xyXG4vLyAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKTtcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIGZ1bmN0aW9uIHR2c3RhdGljKGNhbnZhcywgY3R4LCBzY2FsZSkge1xyXG4vLyAgICAgICBzY2FsZSA9IHNjYWxlIHx8IDE7XHJcbi8vICAgICAgIHZhciBoID0gY2FudmFzLmhlaWdodDtcclxuLy8gICAgICAgdmFyIHcgPSBjYW52YXMud2lkdGg7XHJcbiAgXHJcbi8vICAgICAgIGJ1ZmZlcmN0eC5jbGVhclJlY3QoMCwgMCwgV0lEVEgsIEhFSUdIVCk7XHJcbi8vICAgICAgIC8vIGRyYXcgdGhlIHN0YXRpYyBvbiB0aGUgYnVmZmVyIGNhbnZhc1xyXG4vLyAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IFdJRFRIOyB4Kz1zY2FsZSkge1xyXG4vLyAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgSEVJR0hUOyB5Kz1zY2FsZSkge1xyXG4vLyAgICAgICAgICAgaWYgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkpXHJcbi8vICAgICAgICAgICAgIGJ1ZmZlcmN0eC5maWxsUmVjdCh4LCB5LCBzY2FsZSwgc2NhbGUpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfVxyXG4gIFxyXG4vLyAgICAgICAvLyByZXBlYXQgaXQgb250byB0aGUgcmVhbCBjYW52YXNcclxuLy8gICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7IHggKz0gV0lEVEgpIHtcclxuLy8gICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkgKz0gSEVJR0hUKSB7XHJcbi8vICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJ1ZmZlcmNhbnZhcywgeCwgeSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICB9XHJcbiAgXHJcbi8vICAgICAgIC8vIGRyYXcgc29tZSBob3Jpem9udGFsIGxpbmVzIG9uIHRoZSByZWFsIGNhbnZhc1xyXG4vLyAgICAgICBmb3IgKHZhciB5ID0gcmFuZCgxMCk7IHkgPCBjYW52YXMuaGVpZ2h0OyB5ICs9IHJhbmQoMTApKSB7XHJcbi8vICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIHksIGNhbnZhcy53aWR0aCwgcmFuZCgzKSk7XHJcbi8vICAgICAgIH1cclxuICBcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIHdpbmRvdy50dnN0YXRpYyA9IHR2c3RhdGljO1xyXG4vLyAgIH0pKCk7XHJcbi8vICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkLCBmYWxzZSk7XHJcbi8vIFx0XHRmdW5jdGlvbiBsb2FkKCkge1xyXG4vLyBcdFx0XHRjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm9pc2UnKTtcclxuLy8gXHRcdFx0Y3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbi8vIFx0XHRcdGN0eC5maWxsU3R5bGUgPSAnI2Y3ZjdmJztcclxuXHJcbi8vIFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xyXG4vLyBcdFx0fVxyXG5cclxuLy8gXHRcdGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuLy8gXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcbi8vIFx0XHRcdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbi8vIFx0XHRcdHR2c3RhdGljKGNhbnZhcywgY3R4LCAyKTtcclxuLy8gXHRcdH1cclxuXHJcbi8vLS0tLS0tLS0tLVNjcm9sbCBFZmZlY3RzLS0tLS0tLS0tLS8vXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcclxuICAgIGxldCBjYXJkSXRlbSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRpbWdfX2l0ZW0nKSlcclxuICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXHJcbiAgICBsZXQgY29udGFjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0JylcclxuICAgIGxldCBsb2dvSW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9nbyBzdmcgLmMnKVxyXG4gICAgbGV0IGxvZ29PdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dvIHN2ZyAuZCcpXHJcbiAgICBsZXQgbGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYgdWwgbGkgYScpKVxyXG5cclxuICAgIGlmKHdpbmRvdy5wYWdlWU9mZnNldCAqIDMuMSA+IGNhbnZhcy5oZWlnaHQpe1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYXJkSXRlbS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGNhcmRJdGVtW2ldLmNsYXNzTGlzdC5hZGQoJ2NhcmRpbWctLXJldmVhbCcpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hlY2tXb3Jrcygpe1xyXG4gICAgICAgIGlmKHdpbmRvdy5wYWdlWU9mZnNldCArIDUwID4gY2FudmFzLmhlaWdodCl7XHJcbiAgICAgICAgICAgIGJvZHkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1ib29rb3B1cylcIlxyXG4gICAgICAgICAgICBpZiAoY2FudmFzLndpZHRoID4gOTAwKXtcclxuICAgICAgICAgICAgICAgIGxvZ29Jbm5lci5zdHlsZS5maWxsID0gXCJ2YXIoLS1saWdodClcIlxyXG4gICAgICAgICAgICAgICAgbG9nb091dGVyLnN0eWxlLnN0cm9rZSA9IFwidmFyKC0tZGFyaylcIlxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rc1tpXS5zdHlsZS5jb2xvciA9IFwidmFyKC0tZGFyaylcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICBlbHNleyAvKiBEZWZhdWx0IFZhbHVlcyAqL1xyXG4gICAgICAgICAgICBib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidmFyKC0tbGlnaHQpXCJcclxuICAgICAgICAgICAgaWYgKGNhbnZhcy53aWR0aCA+IDkwMCl7XHJcbiAgICAgICAgICAgICAgICBsb2dvSW5uZXIuc3R5bGUuZmlsbCA9IFwidmFyKC0tY3RhKVwiXHJcbiAgICAgICAgICAgICAgICBsb2dvT3V0ZXIuc3R5bGUuc3Ryb2tlID0gXCJ2YXIoLS1kYXJrKVwiXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmtzW2ldLnN0eWxlLmNvbG9yID0gXCJ2YXIoLS1kYXJrKVwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjaGVja1dvcmtzKCk7XHJcbiAgICBpZih3aW5kb3cucGFnZVlPZmZzZXQgKyBjb250YWN0LnNjcm9sbEhlaWdodCAtIDQ1MCAgPiBjYW52YXMuaGVpZ2h0ICsgIGNvbnRhY3Quc2Nyb2xsSGVpZ2h0ICl7XHJcbiAgICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWRhcmspXCJcclxuICAgICAgICBpZiAoY2FudmFzLndpZHRoID4gOTAwKXtcclxuICAgICAgICAgICAgbG9nb0lubmVyLnN0eWxlLmZpbGwgPSBcInZhcigtLWN0YSlcIlxyXG4gICAgICAgICAgICBsb2dvT3V0ZXIuc3R5bGUuc3Ryb2tlID0gXCJ2YXIoLS1saWdodClcIlxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgbGlua3NbaV0uc3R5bGUuY29sb3IgPSBcInZhcigtLWxpZ2h0KVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9ZWxzZSBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ICsgMjAwID4gY2FudmFzLmhlaWdodCB8fCB3aW5kb3cucGFnZVlPZmZzZXQgKyBjb250YWN0LnNjcm9sbEhlaWdodCAtIDkwMCAgPCBjYW52YXMuaGVpZ2h0ICsgIGNvbnRhY3Quc2Nyb2xsSGVpZ2h0KXtcclxuICAgICAgICBjaGVja1dvcmtzKCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5sZXQgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtbmF2LS1tZW51JylcclxuICAgIFxyXG5tZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbGV0IGxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW5hdiAubG9nbyAuYycpO1xyXG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICBsZXQgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW5hdl9fbGlua3MnKVxyXG4gICAgXHJcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgbG9nby5zdHlsZS5maWxsID0gXCJ2YXIoLS1saWdodClcIjtcclxuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgbGlua3Muc3R5bGUub3BhY2l0eSA9IFwiMVwiXHJcbiAgICAgICAgbGlua3Muc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgxKVwiXHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICAgbG9nby5zdHlsZS5maWxsID0gXCJ2YXIoLS1jdGEpXCJcclxuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93WSA9IFwidmlzaWJsZVwiO1xyXG4gICAgICAgIGxpbmtzLnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxyXG4gICAgICAgIGxpbmtzLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMSwgMClcIlxyXG4gICAgfVxyXG59KSAgICAiLCJ2YXIgVmFuaWxsYVRpbHQ9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtjbGFzcyB0e2NvbnN0cnVjdG9yKHQsZT17fSl7aWYoISh0IGluc3RhbmNlb2YgTm9kZSkpdGhyb3dcIkNhbid0IGluaXRpYWxpemUgVmFuaWxsYVRpbHQgYmVjYXVzZSBcIit0K1wiIGlzIG5vdCBhIE5vZGUuXCI7dGhpcy53aWR0aD1udWxsLHRoaXMuaGVpZ2h0PW51bGwsdGhpcy5sZWZ0PW51bGwsdGhpcy50b3A9bnVsbCx0aGlzLnRyYW5zaXRpb25UaW1lb3V0PW51bGwsdGhpcy51cGRhdGVDYWxsPW51bGwsdGhpcy51cGRhdGVCaW5kPXRoaXMudXBkYXRlLmJpbmQodGhpcyksdGhpcy5yZXNldEJpbmQ9dGhpcy5yZXNldC5iaW5kKHRoaXMpLHRoaXMuZWxlbWVudD10LHRoaXMuc2V0dGluZ3M9dGhpcy5leHRlbmRTZXR0aW5ncyhlKSx0aGlzLnJldmVyc2U9dGhpcy5zZXR0aW5ncy5yZXZlcnNlPy0xOjEsdGhpcy5nbGFyZT10aGlzLmlzU2V0dGluZ1RydWUodGhpcy5zZXR0aW5ncy5nbGFyZSksdGhpcy5nbGFyZVByZXJlbmRlcj10aGlzLmlzU2V0dGluZ1RydWUodGhpcy5zZXR0aW5nc1tcImdsYXJlLXByZXJlbmRlclwiXSksdGhpcy5nbGFyZSYmdGhpcy5wcmVwYXJlR2xhcmUoKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCl9aXNTZXR0aW5nVHJ1ZSh0KXtyZXR1cm5cIlwiPT09dHx8ITA9PT10fHwxPT09dH1hZGRFdmVudExpc3RlbmVycygpe3RoaXMub25Nb3VzZUVudGVyQmluZD10aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpLHRoaXMub25Nb3VzZU1vdmVCaW5kPXRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSx0aGlzLm9uTW91c2VMZWF2ZUJpbmQ9dGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKSx0aGlzLm9uV2luZG93UmVzaXplQmluZD10aGlzLm9uV2luZG93UmVzaXplQmluZC5iaW5kKHRoaXMpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMub25Nb3VzZUVudGVyQmluZCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW91c2VNb3ZlQmluZCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcy5vbk1vdXNlTGVhdmVCaW5kKSx0aGlzLmdsYXJlJiZ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25XaW5kb3dSZXNpemVCaW5kKX1yZW1vdmVFdmVudExpc3RlbmVycygpe3RoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMub25Nb3VzZUVudGVyQmluZCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW91c2VNb3ZlQmluZCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcy5vbk1vdXNlTGVhdmVCaW5kKSx0aGlzLmdsYXJlJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25XaW5kb3dSZXNpemVCaW5kKX1kZXN0cm95KCl7Y2xlYXJUaW1lb3V0KHRoaXMudHJhbnNpdGlvblRpbWVvdXQpLG51bGwhPT10aGlzLnVwZGF0ZUNhbGwmJmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQ2FsbCksdGhpcy5yZXNldCgpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSx0aGlzLmVsZW1lbnQudmFuaWxsYVRpbHQ9bnVsbCxkZWxldGUgdGhpcy5lbGVtZW50LnZhbmlsbGFUaWx0LHRoaXMuZWxlbWVudD1udWxsfW9uTW91c2VFbnRlcih0KXt0aGlzLnVwZGF0ZUVsZW1lbnRQb3NpdGlvbigpLHRoaXMuZWxlbWVudC5zdHlsZS53aWxsQ2hhbmdlPVwidHJhbnNmb3JtXCIsdGhpcy5zZXRUcmFuc2l0aW9uKCl9b25Nb3VzZU1vdmUodCl7bnVsbCE9PXRoaXMudXBkYXRlQ2FsbCYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVDYWxsKSx0aGlzLmV2ZW50PXQsdGhpcy51cGRhdGVDYWxsPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUJpbmQpfW9uTW91c2VMZWF2ZSh0KXt0aGlzLnNldFRyYW5zaXRpb24oKSx0aGlzLnNldHRpbmdzLnJlc2V0JiZyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZXNldEJpbmQpfXJlc2V0KCl7dGhpcy5ldmVudD17cGFnZVg6dGhpcy5sZWZ0K3RoaXMud2lkdGgvMixwYWdlWTp0aGlzLnRvcCt0aGlzLmhlaWdodC8yfSx0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtPVwicGVyc3BlY3RpdmUoXCIrdGhpcy5zZXR0aW5ncy5wZXJzcGVjdGl2ZStcInB4KSByb3RhdGVYKDBkZWcpIHJvdGF0ZVkoMGRlZykgc2NhbGUzZCgxLCAxLCAxKVwiLHRoaXMuZ2xhcmUmJih0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS50cmFuc2Zvcm09XCJyb3RhdGUoMTgwZGVnKSB0cmFuc2xhdGUoLTUwJSwgLTUwJSlcIix0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS5vcGFjaXR5PVwiMFwiKX1nZXRWYWx1ZXMoKXtsZXQgdD0odGhpcy5ldmVudC5jbGllbnRYLXRoaXMubGVmdCkvdGhpcy53aWR0aCxlPSh0aGlzLmV2ZW50LmNsaWVudFktdGhpcy50b3ApL3RoaXMuaGVpZ2h0O3JldHVybiB0PU1hdGgubWluKE1hdGgubWF4KHQsMCksMSksZT1NYXRoLm1pbihNYXRoLm1heChlLDApLDEpLHt0aWx0WDoodGhpcy5yZXZlcnNlKih0aGlzLnNldHRpbmdzLm1heC8yLXQqdGhpcy5zZXR0aW5ncy5tYXgpKS50b0ZpeGVkKDIpLHRpbHRZOih0aGlzLnJldmVyc2UqKGUqdGhpcy5zZXR0aW5ncy5tYXgtdGhpcy5zZXR0aW5ncy5tYXgvMikpLnRvRml4ZWQoMikscGVyY2VudGFnZVg6MTAwKnQscGVyY2VudGFnZVk6MTAwKmUsYW5nbGU6TWF0aC5hdGFuMih0aGlzLmV2ZW50LmNsaWVudFgtKHRoaXMubGVmdCt0aGlzLndpZHRoLzIpLC0odGhpcy5ldmVudC5jbGllbnRZLSh0aGlzLnRvcCt0aGlzLmhlaWdodC8yKSkpKigxODAvTWF0aC5QSSl9fXVwZGF0ZUVsZW1lbnRQb3NpdGlvbigpe2xldCB0PXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLndpZHRoPXRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCx0aGlzLmhlaWdodD10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0LHRoaXMubGVmdD10LmxlZnQsdGhpcy50b3A9dC50b3B9dXBkYXRlKCl7bGV0IHQ9dGhpcy5nZXRWYWx1ZXMoKTt0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtPVwicGVyc3BlY3RpdmUoXCIrdGhpcy5zZXR0aW5ncy5wZXJzcGVjdGl2ZStcInB4KSByb3RhdGVYKFwiKyhcInhcIj09PXRoaXMuc2V0dGluZ3MuYXhpcz8wOnQudGlsdFkpK1wiZGVnKSByb3RhdGVZKFwiKyhcInlcIj09PXRoaXMuc2V0dGluZ3MuYXhpcz8wOnQudGlsdFgpK1wiZGVnKSBzY2FsZTNkKFwiK3RoaXMuc2V0dGluZ3Muc2NhbGUrXCIsIFwiK3RoaXMuc2V0dGluZ3Muc2NhbGUrXCIsIFwiK3RoaXMuc2V0dGluZ3Muc2NhbGUrXCIpXCIsdGhpcy5nbGFyZSYmKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybT1gcm90YXRlKCR7dC5hbmdsZX1kZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKWAsdGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUub3BhY2l0eT1gJHt0LnBlcmNlbnRhZ2VZKnRoaXMuc2V0dGluZ3NbXCJtYXgtZ2xhcmVcIl0vMTAwfWApLHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInRpbHRDaGFuZ2VcIix7ZGV0YWlsOnR9KSksdGhpcy51cGRhdGVDYWxsPW51bGx9cHJlcGFyZUdsYXJlKCl7aWYoIXRoaXMuZ2xhcmVQcmVyZW5kZXIpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJqcy10aWx0LWdsYXJlXCIpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTGlzdC5hZGQoXCJqcy10aWx0LWdsYXJlLWlubmVyXCIpLHQuYXBwZW5kQ2hpbGQoZSksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHQpfXRoaXMuZ2xhcmVFbGVtZW50V3JhcHBlcj10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy10aWx0LWdsYXJlXCIpLHRoaXMuZ2xhcmVFbGVtZW50PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLXRpbHQtZ2xhcmUtaW5uZXJcIiksdGhpcy5nbGFyZVByZXJlbmRlcnx8KE9iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnRXcmFwcGVyLnN0eWxlLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMFwiLGxlZnQ6XCIwXCIsd2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLG92ZXJmbG93OlwiaGlkZGVuXCJ9KSxPYmplY3QuYXNzaWduKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiNTAlXCIsbGVmdDpcIjUwJVwiLFwicG9pbnRlci1ldmVudHNcIjpcIm5vbmVcIixcImJhY2tncm91bmQtaW1hZ2VcIjpgbGluZWFyLWdyYWRpZW50KDBkZWcsIHJnYmEoMjU1LDI1NSwyNTUsMCkgMCUsIHJnYmEoMjU1LDI1NSwyNTUsMSkgMTAwJSlgLHdpZHRoOmAkezIqdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRofXB4YCxoZWlnaHQ6YCR7Mip0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9cHhgLHRyYW5zZm9ybTpcInJvdGF0ZSgxODBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiLFwidHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMCVcIixvcGFjaXR5OlwiMFwifSkpfXVwZGF0ZUdsYXJlU2l6ZSgpe09iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUse3dpZHRoOmAkezIqdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRofWAsaGVpZ2h0OmAkezIqdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRofWB9KX1vbldpbmRvd1Jlc2l6ZUJpbmQoKXt0aGlzLnVwZGF0ZUdsYXJlU2l6ZSgpfXNldFRyYW5zaXRpb24oKXtjbGVhclRpbWVvdXQodGhpcy50cmFuc2l0aW9uVGltZW91dCksdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb249dGhpcy5zZXR0aW5ncy5zcGVlZCtcIm1zIFwiK3RoaXMuc2V0dGluZ3MuZWFzaW5nLHRoaXMuZ2xhcmUmJih0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS50cmFuc2l0aW9uPWBvcGFjaXR5ICR7dGhpcy5zZXR0aW5ncy5zcGVlZH1tcyAke3RoaXMuc2V0dGluZ3MuZWFzaW5nfWApLHRoaXMudHJhbnNpdGlvblRpbWVvdXQ9c2V0VGltZW91dCgoKT0+e3RoaXMuZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uPVwiXCI7dGhpcy5nbGFyZSYmKHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zaXRpb249XCJcIil9LHRoaXMuc2V0dGluZ3Muc3BlZWQpfWV4dGVuZFNldHRpbmdzKHQpe2xldCBlPXtyZXZlcnNlOiExLG1heDozNSxwZXJzcGVjdGl2ZToxZTMsZWFzaW5nOlwiY3ViaWMtYmV6aWVyKC4wMywuOTgsLjUyLC45OSlcIixzY2FsZTpcIjFcIixzcGVlZDpcIjMwMFwiLHRyYW5zaXRpb246ITAsYXhpczpudWxsLGdsYXJlOiExLFwibWF4LWdsYXJlXCI6MSxcImdsYXJlLXByZXJlbmRlclwiOiExLHJlc2V0OiEwfSxpPXt9O2Zvcih2YXIgcyBpbiBlKWlmKHMgaW4gdClpW3NdPXRbc107ZWxzZSBpZih0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS10aWx0LVwiK3MpKXtsZXQgdD10aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10aWx0LVwiK3MpO3RyeXtpW3NdPUpTT04ucGFyc2UodCl9Y2F0Y2goZSl7aVtzXT10fX1lbHNlIGlbc109ZVtzXTtyZXR1cm4gaX1zdGF0aWMgaW5pdChlLGkpe2UgaW5zdGFuY2VvZiBOb2RlJiYoZT1bZV0pLGUgaW5zdGFuY2VvZiBOb2RlTGlzdCYmKGU9W10uc2xpY2UuY2FsbChlKSksZSBpbnN0YW5jZW9mIEFycmF5JiZlLmZvckVhY2goZT0+e1widmFuaWxsYVRpbHRcImluIGV8fChlLnZhbmlsbGFUaWx0PW5ldyB0KGUsaSkpfSl9fXJldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmKHdpbmRvdy5WYW5pbGxhVGlsdD10LHQuaW5pdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGlsdF1cIikpKSx0fSgpOyJdfQ==
